# OZ_Django_Blog

## Django 프로젝트 PythonAnywhere 배포 가이드

### 1. 최종 목표

로컬 컴퓨터에서 개발한 Django 프로젝트를 PythonAnywhere 클라우드 서버에 배포하여, 누구나 인터넷 주소를 통해 접속할 수 있는 실제 웹 서비스로 만드는 것입니다.

### 2. 핵심 배포 절차 (가장 이상적인 순서)

1.  **코드 준비:**
    *   Git을 사용하여 최종 개발 코드를 GitHub의 `develop` 브랜치에 업로드합니다.

2.  **서버에 코드 복제:**
    *   PythonAnywhere 서버의 Bash 콘솔에 접속합니다.
    *   `git clone` 명령어를 사용하여 GitHub 저장소에서 프로젝트 코드를 다운로드합니다.

3.  **서버 환경 구축:**
    *   **가상 환경 생성:** `mkvirtualenv` 명령어를 사용하여 프로젝트만을 위한 격리된 Python 가상 환경을 생성합니다.
    *   **라이브러리 설치:** `requirements.txt` 파일(배포에 필요한 최소한의 라이브러리 목록 포함)을 사용하여 `pip install` 명령어로 필요한 라이브러리를 설치합니다.

4.  **웹 앱 설정 (PythonAnywhere Web 탭):**
    *   **경로 설정:** Django 프로젝트의 소스 코드 경로와 생성된 가상 환경 경로를 정확하게 지정합니다.
    *   **WSGI 파일 수정:** 웹 서버가 Django 애플리케이션을 실행할 수 있도록 WSGI 파일을 수정하여 연결 설정을 완료합니다.

5.  **데이터베이스 및 기타 설정:**
    *   **데이터베이스 생성:** `python3 manage.py migrate` 명령어를 실행하여 배포 환경에 맞는 데이터베이스를 생성합니다.
    *   **정적 파일 수집:** `python3 manage.py collectstatic` 명령어를 실행하여 CSS, JavaScript 등 정적 파일들을 한곳으로 모읍니다.
    *   **보안 설정:** `ALLOWED_HOSTS` 설정에 실제 접속 도메인 주소를 추가하여 보안을 강화합니다.

6.  **재시작:**
    *   PythonAnywhere Web 탭에서 "Reload" 버튼을 클릭하여 모든 변경 사항을 적용하고 웹 서비스를 재시작합니다.

---

### 3. 우리가 겪은 주요 오류와 해결 과정 (문제 해결의 여정)

배포 과정은 로컬 환경과 서버 환경의 차이로 인해 발생하는 다양한 문제를 해결하는 연속입니다. 다음은 우리가 경험한 일반적인 오류 사례와 해결 방법입니다.

| 발생한 오류                  | 원인 (왜 발생했나?)                                                                                                                            | 해결책 (어떻게 해결했나?)                                                                                                                                                                                                                                                                                                                                                                |
| :--------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 라이브러리 설치 실패 (`...`) | 로컬 Mac 환경 기준으로 생성된 `requirements.txt` 파일이 서버의 Python 버전(3.10)과 호환되지 않거나, 특정 라이브러리의 설치 요구사항이 충족되지 않았습니다. | 서버 환경에서 **`requirements.txt` 파일을 새로 생성**하고, Django, DRF 등 **배포에 필수적인 라이브러리만 명시**하여 다시 설치합니다. 필요하다면 서버 환경에 맞는 라이브러리 버전을 직접 지정합니다.                                                                                                                                                                                                                                                                                                                                                       |
| `SECRET_KEY` 없음 오류 (`...`) | 웹 앱 설정(Web 탭)에 입력한 환경 변수는 웹사이트 실행 시에만 사용되며, `manage.py`와 같은 **명령어 실행 시에는 직접 접근할 수 없기 때문**입니다.           | `python-dotenv` 라이브러리를 설치하고, 서버 프로젝트 폴더에 **`.env` 파일을 생성**하여 `SECRET_KEY`를 포함한 환경 변수를 저장합니다. `python-dotenv`가 `.env` 파일을 읽도록 `manage.py`나 `wsgi.py` 파일을 수정합니다.                                                                                                                                                                                                                                                                                                                                        |
| `django` 모듈 없음 오류 (`...`) | WSGI 파일 설정이 가장 큰 문제였습니다. 웹 앱이 우리가 생성한 **가상 환경을 사용하도록 제대로 활성화되지 않았기 때문**입니다.                                | PythonAnywhere 공식 문서의 표준 방식대로, **WSGI 파일 상단에 가상 환경 경로를 지정하는 코드** (`# Set up to use virtualenv`)를 추가하여 가상 환경을 명시적으로 활성화합니다.                                                                                                                                                                                                                                                                                                                                                                                            |
| `psycopg2` 모듈 없음 오류 (`...`) | `production.py` 설정 파일이 PostgreSQL 데이터베이스를 사용하도록 설정되어 있었으나, **서버 환경에 PostgreSQL이 제대로 설정되지 않았거나 연결되지 않았기 때문**입니다. | `production.py` 파일의 **데이터베이스 설정을 PostgreSQL에서 SQLite로 변경**하여, 서버 환경에 별도의 DB 설정 없이 Django에서 기본적으로 제공하는 SQLite를 사용하도록 합니다. (필요에 따라 DB 설정을 변경하거나, 서버에 PostgreSQL을 설치하고 연결해야 합니다.)                                                                                                                                                                                                                                                                                                                          |
| `Bad Request (400)` 오류 (`...`) | `production.py`의 `ALLOWED_HOSTS` 설정에 실제 접속 도메인 주소인 **`dhwmzheld6470.pythonanywhere.com`이 누락되었기 때문**입니다.                   | `ALLOWED_HOSTS` 목록에 실제 사용할 **도메인 주소(`dhwmzheld6470.pythonanywhere.com`)를 명시적으로 추가**하여 이 도메인으로 접속하는 요청을 허용하도록 설정합니다.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `Not Found (404)` 오류 (`...`)  | 배포 성공 후 Django가 정상 작동했지만, **최상위 주소(`/`)에 연결된 페이지가 없었기 때문**입니다.                                                            | `/swagger/`와 같이 **실제로 페이지가 존재하는 URL로 접속**하여 프로젝트가 성공적으로 작동하는 것을 확인합니다. (이는 프로젝트 자체의 URL 설정 문제이며, 배포 환경 자체의 문제는 아닙니다.)                                                                                                                                                                                                                                                                                                                                                                                                      |

---

**결론적으로,** 이번 배포 과정은 **"로컬 개발 환경과 실제 서버 환경의 차이를 이해하고, 그 차이를 하나씩 파악하여 맞춰나가는 과정"** 이었습니다.
